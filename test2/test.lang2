fn test_eq(name: string, expected: int, actual: int) {
    print(name);
    print(" => ");

    if expected == actual {
        printnln(actual);
    } else {
        print("expected:");
        printn(expected);
        print(", actual:");
        printnln(actual);
    }

    return 0;
}

fn test(name: string, ok: bool) {
    print(name);
    print(" => ");

    if ok {
        println("succeed");
    } else {
        println("failed");
    }

    return 0;
}

test_eq("zero", 0, 0);
test_eq("one", 1, 1);

test_eq("add", 9, 5 + 4);
test_eq("sub", 13, 20 - 7);
test_eq("mul", 2714195, 809 * 3355);
test_eq("div 1", 3, 9 / 3);
test_eq("div 2", 2, 8 / 3);
test_eq("priority", 18, 3 + 7 * 4 - 13);

test("equal", a == 38);
test("not equal", a != 39);
test("less than", a < 39);
test("less than or equal", a <= 38);
test("greater than", a > 30);
test("greater than or equal", a >= 31);
test("and", true && true);
test("or", false || true);

let a = 3 + 35;
test_eq("binding", 38, a);

let b = 10;
{
    let b = 13;
}
test_eq("scope", 10, b);

let b = 30;

test_eq("shadowing", 30, b);

test_eq("add function", 30, add(14, 16));
test_eq("early return", 1000, early_return(3));
test_eq("fibonacci", 55, fib(10));

fn add(a: int, b: int): int {
    return a + b;
}

fn early_return(a: int): int {
    if a < 5 {
        return 1000;
    }

    return 500000;
}

fn fib(n: int): int {
    if n == 0 || n == 1 {
        return n;
    } else {
        return fib(n - 1) + fib(n - 2);
    }
}
